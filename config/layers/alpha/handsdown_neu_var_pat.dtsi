/*
 * Copyright (c) 2020 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

/* = ⇧ =   34 Keys - Hands Down neu - variante Pat
    ╭──────────────────╮ ╭───────────────╮
    │ W  F  M  P  V    │ │ /  .  J  '  Z │
    │ R  S  N  T  B    │ │ ,  E  A  I  H │
    │ X  C  L  D  G    │ │ -  U  O  Y  K │
    ╰────────╮ ⇧ CapsW │ │⌫ -L1- ╭──────╯
             ╰─────────╯ ╰────────╯         */
/*     Chorded Letters - 34 Keys - Hands Down neu - variante Pat
    ╭──────────────╮ ╭─────────────────╮
    │ Qu           │ │                 │
    │ / \          │ │                 │
    │ W  F  _  _  _│ │_  _     _  _  _ │
    │ _  _  _  _  _│ │_  E -Ä- A  _  _ │
    │              │ │   │ \           │
    │              │ │   Ü  Ö          │
    │              │ │   │    \        │
    │ _  _  _  _  _│ │_  U     O  _  _ │
    ╰────────╮ _  _│ │_  _ ╭───────────╯
             ╰─────╯ ╰─────╯         
*/   
 
// LEFT SIDE
// TOP 
#define P_W LTP
#define P_F LTR
#define P_M LTM
#define P_P LTII
#define P_V LTIO
// MIDDLE
#define P_R LMP
#define P_S LMR
#define P_N LMM
#define P_T LMII
#define P_B LMIO
// BOTTOM
#define P_X LBP
#define P_C LBR
#define P_L LBM
#define P_D LBII
#define P_G LBIO
// THUMB
#define P_SHIFT LTI
#define P_REP LTO

// RIGHT SIDE
// TOP 
#define P_SLASH RTIO
#define P_DOT RTII
#define P_J RTM
#define P_GRAVE RTR
#define P_Z RTP
// MIDDLE
#define P_COMMA RMIO
#define P_A RMII
#define P_E RMM
#define P_I RMR
#define P_H RMP
// BOTTOM
#define P_MINUS RBIO
#define P_U RBII
#define P_O RBM
#define P_Y RBR
#define P_K RBP
// THUMB
#define P_BACKSPACE RTO
#define P_LAYER1 RTI

&caps_word {
   continue-list = <UNDERSCORE MINUS BACKSPACE>;
};
/*           34 Keys
 ╭──────────────╮ ╭──────────────╮
 │ 0  1  2  3  4│ │ 5  6  7  8  9│
 │10 11 12 13 14│ │15 16 17 18 19│
 │20 21 22 23 24│ │25 26 27 28 29│
 ╰────────╮30 31│ │32 33╭────────╯
          ╰─────╯ ╰─────╯         */
/*    34 Keys - Hands Down neu
 https://sites.google.com/alanreiser.com/handsdown/home/hands-down-neu?authuser=0
 ╭───────────────╮ ╭─────────────────╮
 │ w  f  m  p  v │ │ /  .  q  "  '  z│
 │ r  s  n  t  b │ │ ,  a  e  i  h  j│
 │ x  c  l  d  g │ │ -  u  o  y  k   │     
 ╰─────────╮,; .:│ │ ␣  ⏎╭───────────╯
           ╰─────╯ ╰─────╯         
*/
/ {
/*     34 Keys - Hands Down neu - variante Pat
 ╭────────────────╮ ╭───────────────╮
 │ w  f  m  p  v  │ │ /  .  j  '  z │
 │ r  s  n  t  b  │ │ ,  a  e  i  h │
 │ x  c  l  d  g  │ │ -  u  o  y  k │
 ╰────────╮ ⇧ REP │ │ ␣ -L0- ╭──────╯
          ╰───────╯ ╰────────╯         
*/
/* = ⇧ =   34 Keys - Hands Down neu - variante Pat
    ╭──────────────────╮ ╭───────────────╮
    │ W  F  M  P  V    │ │ │  :  J  "  Z │
    │ R  S  N  T  B    │ │ ;  A  E  I  H │
    │ X  C  L  D  G    │ │ _  U  O  Y  K │
    ╰────────╮SYM ⌫/NUM│ │␣/⏎  REP╭──────╯
             ╰─────────╯ ╰────────╯         */
/*     Chorded Letters - 34 Keys - Hands Down neu - variante Pat
    ╭──────────────╮ ╭─────────────────╮
    │ Qu           │ │                 │
    │ / \          │ │                 │
    │ W  F  _  _  _│ │_  _     _  _  _ │
    │ _  _  _  _  _│ │_  A -Ä- E  _  _ │
    │              │ │        /│       │
    │              │ │      Ü  Ö       │
    │              │ │     /   │       │
    │ _  _  _  _  _│ │_  U     O  _  _ │
    ╰────────╮ _  _│ │_  _ ╭───────────╯
             ╰─────╯ ╰─────╯         
*/   
      // combos {
      //    compatible = "zmk,combos";
         // COMBO(tab, &kp TAB, TLR TLM)
         // COMBO(shift, &skq LSHFT, TRM TRR)
         // COMBO(ctrl, &sk LCTL, BLR BLM)
         // COMBO(backspace, &kp BSPC, BRM BRR)
         // COMBO(cmd, &sk LCMD, LTI LTO)
         // COMBO(opt, &sk LALT, RTO RTI)
         //COMBO(z, &kp Z, MLP MLM)
         //COMBO_LONG(capsword, &caps_word, MLIO MRIO)
      // };
      keymap {
         compatible = "zmk,keymap";
         hands_down_neu {
            bindings = <
//╭────────┬───────┬───────────┬────────┬────────╮╭────────────────┬──────────────┬────────┬───────────┬────────╮
   &td_s_W  &td_s_F  &td_s_M     &td_s_P  &td_s_V  &td_slh_pipe     &td_dot_colon  &td_s_J  &td_quotes  &td_s_Z
//├────────┼───────┼───────────┼────────┼────────┤├────────────────┼──────────────┼────────┼───────────┼────────┤
   &td_s_R  &td_s_S  &td_s_N     &td_s_T  &td_s_B  &td_comma_semi   &td_A          &td_s_E  &td_s_I     &td_s_H
//├────────┼───────┼───────────┼────────┼────────┤├────────────────┼──────────────┼────────┼───────────┼────────┤
   &td_s_X  &td_s_C  &td_s_L     &td_s_D  &td_s_G  &td_minus_under  &td_U          &td_O    &td_s_Y     &td_s_K
//╰────────┴───────┴───╮                         ││                                     ╭──┴───────────┴────────╯
                        &td_ls_SYM  &td_lk_NUM_bs  &td_spc_shift_ret  &rep_capsw_l CMD 0
//                     ╰──────────┴──────────────╯╰─────────────────┴───────────────────╯
            >;
         };
      };
   };

// Defines the LTO key, which is
// REPEAT on tap
// Caps Word on Shift-tap (as well as a chord)
// and momentary layer (&mo) on hold
   MOD_MORPH(rep_capsw, &key_repeat, &caps_word, MOD_LSFT|MOD_RSFT)
 / {
   behaviors {
        rep_capsw_l: rep_capsw_l {
            compatible = "zmk,behavior-hold-tap";
            label = "rep_capsw_l";
            #binding-cells = <2>;
            tapping-term-ms = <200>;
            quick-tap-ms = <50>;
            flavor = "tap-preferred";
            bindings = <&mo>, <&mm_rep_capsw>;
        };
    };
};
   COMBO_LAYER(CapsW, &caps_word, LTO RTO, ALP)
   COMBO_LAYER(DelW, &kp LA(BACKSPACE), LTO RTI, ALP SYM NUM)

   // thumb keys
   TAP_DANCE_LAYER_sl_mo_to(SYM)
   TAP_DANCE_LAYER_kp_mo_to(NUM_bs, NUM, BACKSPACE)
   TAP_DANCE(spc_shift_ret, <&mt LSHIFT SPACE>, <&kp RETURN>)

   CHORD(QU, &kp Q &kp U, LTP LTR)

   // Sentence ending auto capitalize
   MACRO(dot, &kp DOT &kp SPACE &skl LSHIFT)
   TAP_DANCE(dot, <&macro_dot>, <&kp DOT>)

   // tap dance auto shift
   MACRO(comma, &kp COMMA &kp SPACE)
   TAP_DANCE(comma_semi, <&macro_comma>, <&kp SEMICOLON>)
   TAP_DANCE(minus_under, <&kp MINUS>, <&kp UNDERSCORE>)
   TAP_DANCE(slh_pipe, <&kp SLASH>, <&kp PIPE>)
   TAP_DANCE(dot_colon, <&macro_dot>, <&kp COLON>, <&kp DOT>)
   TAP_DANCE(quotes, <&kp SQT>, <&kp DQT>)

   // tap dance alphas
   MACRO(shift_ae, &kp LA(U) &kp LS(A))
   MACRO(ae, &kp LA(U) &kp A)
   TAP_DANCE(A, <&kp A>, <&kp LS(A)>, <&macro_ae>, <&macro_shift_ae>)
   TAP_DANCE_SHIFT(B)
   TAP_DANCE_SHIFT(C)
   TAP_DANCE_SHIFT(D)
   TAP_DANCE_SHIFT(E)
   TAP_DANCE_SHIFT(F)
   TAP_DANCE_SHIFT(G)
   TAP_DANCE_SHIFT(H)
   TAP_DANCE_SHIFT(I)
   TAP_DANCE_SHIFT(J)
   TAP_DANCE_SHIFT(K)
   TAP_DANCE_SHIFT(L)
   TAP_DANCE_SHIFT(M)
   TAP_DANCE_SHIFT(N)
   MACRO(shift_oe, &kp LA(U) &kp LS(O))
   MACRO(oe, &kp LA(U) &kp O)
   TAP_DANCE(O, <&kp O>, <&kp LS(O)>, <&macro_oe>, <&macro_shift_oe>)
   TAP_DANCE_SHIFT(P)
   TAP_DANCE_SHIFT(Q)
   TAP_DANCE_SHIFT(R)
   TAP_DANCE_SHIFT(S)
   //ß
   CHORD(ss, &kp LA(S), P_S P_REP)
   TAP_DANCE_SHIFT(T)
   MACRO(shift_ue, &kp LA(U) &kp LS(U))
   MACRO(ue, &kp LA(U) &kp U)
   TAP_DANCE(U, <&kp U>, <&kp LS(U)>, <&macro_ue>, <&macro_shift_ue>)
   TAP_DANCE_SHIFT(V)
   TAP_DANCE_SHIFT(W)
   TAP_DANCE_SHIFT(X)
   TAP_DANCE_SHIFT(Y)
   TAP_DANCE_SHIFT(Z)


